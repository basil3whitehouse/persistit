<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_37) on Tue Dec 04 15:50:36 EST 2012 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
ValueCoder (akiban-persistit 3.2.2 API)
</TITLE>

<META NAME="date" CONTENT="2012-12-04">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ValueCoder (akiban-persistit 3.2.2 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/ValueCoder.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/persistit/encoding/SerialValueCoder.html" title="class in com.persistit.encoding"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/persistit/encoding/ValueDisplayer.html" title="interface in com.persistit.encoding"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/persistit/encoding/ValueCoder.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ValueCoder.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.persistit.encoding</FONT>
<BR>
Interface ValueCoder</H2>
<DL>
<DT><B>All Known Subinterfaces:</B> <DD><A HREF="../../../com/persistit/encoding/ObjectCoder.html" title="interface in com.persistit.encoding">ObjectCoder</A>, <A HREF="../../../com/persistit/encoding/ValueDisplayer.html" title="interface in com.persistit.encoding">ValueDisplayer</A>, <A HREF="../../../com/persistit/encoding/ValueRenderer.html" title="interface in com.persistit.encoding">ValueRenderer</A></DD>
</DL>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../../com/persistit/encoding/CollectionValueCoder.html" title="class in com.persistit.encoding">CollectionValueCoder</A>, <A HREF="../../../com/persistit/DefaultObjectCoder.html" title="class in com.persistit">DefaultObjectCoder</A>, <A HREF="../../../com/persistit/DefaultValueCoder.html" title="class in com.persistit">DefaultValueCoder</A>, <A HREF="../../../com/persistit/encoding/EnumValueCoder.html" title="class in com.persistit.encoding">EnumValueCoder</A>, <A HREF="../../../com/persistit/encoding/SerialValueCoder.html" title="class in com.persistit.encoding">SerialValueCoder</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>ValueCoder</B></DL>
</PRE>

<P>
<p>
 Interface for specialized encoding and decoding of <code>Object</code>s of
 arbitrary type in a <A HREF="../../../com/persistit/Value.html" title="class in com.persistit"><CODE>Value</CODE></A>. Persistit contains built-in logic to
 encode objects of certain classes. For other classes, if there is no
 registered <code>ValueCoder</code>, Persistit uses standard object
 serialization to generate a byte array that represents the state of that
 object in the database.
 </p>
 <p>
 By implementing and registering a <code>ValueCoder</code> with the current
 <A HREF="../../../com/persistit/encoding/CoderManager.html" title="interface in com.persistit.encoding"><CODE>CoderManager</CODE></A> you can override this default encoding. Typically the
 customized encoding of an object will be much shorter than that produced by
 serialization because the customized encoding classes by their Persistit
 class handles (see <CODE>ClassIndex</CODE>) rather than their names.
 In addition, standard serialization serializes the entire graph of other
 objects that may be directly or indirectly referred to by the object being
 made persistent. This behavior may result in storing much more data than is
 required, and more importantly, may result in incorrect semantics. A
 customized <code>ValueEncoder</code> can handle persistence of fields that
 refer to other objects in a manner that is semantically appropriate for the
 specific object. Note that if a class has a <code>ValueCoder</code>, it can
 be stored in Persistit even if it does not implement
 <code>java.io.Serializable</code>.
 </p>
 <p>
 A <code>ValueCoder</code> implements methods to convert an object of some
 class to an array of bytes and back again. Typically the implementation of a
 <code>ValueCoder</code> will simply invoke the <code>Value</code>'s
 <code>put</code> methods to write the fields into the <code>Value</code>. For
 example, the following code defines a class, and a <code>ValueCoder</code> to
 store and retrieve it.
 </p>
 <blockquote>
 
 <pre>
 class MyClass {
     int id;
     int anotherInt;
     String someString;
     MyClass anotherMyClass;
 }
 
 class MyClassValueCoder implements ValueCoder {
     public void put(Value value, Object object, CoderContext context) {
         MyClass mc = (MyClass) object;
         value.put(mc.id);
         value.put(mc.anotherInt);
         value.put(mc.someString);
         value.put(mc.anotherMyClass == null ? -1 : mc.anotherMyClass.id);
     }
 
     public Object get(Value value, Class clazz, CoderContext context) {
         MyClass mc = new MyClass();
         mc.id = value.getInt();
         mc.anotherInt = value.getInt();
         mc.someString = value.getString();
         mc.anotherMyClass = lookupMyClass(value.getInt());
         return mc;
     }
 }
 </pre>
 
 </blockquote>
 <p>
 The application should register this <code>ValueCoder</code> before
 attempting to invoke <A HREF="../../../com/persistit/Value.html#put(java.lang.Object)"><CODE>Value.put(Object)</CODE></A> on an object of class
 <code>MyClass</code> or to retrieve an object value using <A HREF="../../../com/persistit/Value.html#get()"><CODE>Value.get()</CODE></A>
 that will resolve to a <code>MyClass</code>. Generally this means that
 applications should register all <code>ValueCoder</code>s and
 <code>KeyCoder</code>s during application startup, immediately after invoking
 <A HREF="../../../com/persistit/Persistit.html#initialize()"><CODE>Persistit.initialize()</CODE></A>. For example: <blockquote>
 
 <pre>
      ...
  try
  {
      Persistit.initialize();
      CoderManager cm = Persistit.getInstance().getCoderManager();
      cm.registerValueCoder(new MyClassValueCoder());
      cm.registerValueCoder(new MyClassValueCoder2());
      ...
      cm.registerKeyCoder(new MyClassKeyCoder());
      ...
  }
  catch (PersistitException e)
  {
      ...
  }
 </pre>
 
 </blockquote>
 </p>
<P>

<P>
<DL>
<DT><B>Version:</B></DT>
  <DD>1.0</DD>
</DL>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/persistit/encoding/ValueCoder.html#get(com.persistit.Value, java.lang.Class, com.persistit.encoding.CoderContext)">get</A></B>(<A HREF="../../../com/persistit/Value.html" title="class in com.persistit">Value</A>&nbsp;value,
    <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</A>&lt;?&gt;&nbsp;clazz,
    <A HREF="../../../com/persistit/encoding/CoderContext.html" title="interface in com.persistit.encoding">CoderContext</A>&nbsp;context)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Creates an instance of the supplied class, populates its state by
 decoding the supplied <code>Value</code>, and returns it.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/persistit/encoding/ValueCoder.html#put(com.persistit.Value, java.lang.Object, com.persistit.encoding.CoderContext)">put</A></B>(<A HREF="../../../com/persistit/Value.html" title="class in com.persistit">Value</A>&nbsp;value,
    <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&nbsp;object,
    <A HREF="../../../com/persistit/encoding/CoderContext.html" title="interface in com.persistit.encoding">CoderContext</A>&nbsp;context)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Encodes the supplied <code>Object</code> into the supplied
 <code>Value</code>.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="put(com.persistit.Value, java.lang.Object, com.persistit.encoding.CoderContext)"><!-- --></A><H3>
put</H3>
<PRE>
void <B>put</B>(<A HREF="../../../com/persistit/Value.html" title="class in com.persistit">Value</A>&nbsp;value,
         <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&nbsp;object,
         <A HREF="../../../com/persistit/encoding/CoderContext.html" title="interface in com.persistit.encoding">CoderContext</A>&nbsp;context)
         throws <A HREF="../../../com/persistit/exception/ConversionException.html" title="class in com.persistit.exception">ConversionException</A></PRE>
<DL>
<DD><p>
 Encodes the supplied <code>Object</code> into the supplied
 <code>Value</code>. This method will be called only if this
 <code>ValueCoder</code> has been registered with the current
 <A HREF="../../../com/persistit/encoding/CoderManager.html" title="interface in com.persistit.encoding"><CODE>CoderManager</CODE></A> to encode objects having the class of the supplied
 object.
 </p>
 <p>
 Upon completion of this method, the backing byte array of the
 <code>Value</code> and its size should be updated to reflect the
 serialized object. Use the methods <A HREF="../../../com/persistit/Value.html#getEncodedBytes()"><CODE>Value.getEncodedBytes()</CODE></A>,
 <A HREF="../../../com/persistit/Value.html#getEncodedSize()"><CODE>Value.getEncodedSize()</CODE></A> and <A HREF="../../../com/persistit/Value.html#setEncodedSize(int)"><CODE>Value.setEncodedSize(int)</CODE></A> to
 manipulate the byte array directly. More commonly, the implementation of
 this method will simply call the appropriate <code>put</code> methods to
 write the interior field values into the <code>Value</code> object.
 </p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>value</CODE> - The <code>Value</code> to which the interior data of the
            supplied <code>Object</code> should be encoded<DD><CODE>object</CODE> - The object value to encode. This parameter will never be
            <code>null</code> because Persistit encodes nulls with a
            built-in encoding.<DD><CODE>context</CODE> - An arbitrary object that can optionally be supplied by the
            application to convey an application-specific context for the
            operation. (See <A HREF="../../../com/persistit/encoding/CoderContext.html" title="interface in com.persistit.encoding"><CODE>CoderContext</CODE></A>.) The default value is
            <code>null</code>.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../com/persistit/exception/ConversionException.html" title="class in com.persistit.exception">ConversionException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="get(com.persistit.Value, java.lang.Class, com.persistit.encoding.CoderContext)"><!-- --></A><H3>
get</H3>
<PRE>
<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A> <B>get</B>(<A HREF="../../../com/persistit/Value.html" title="class in com.persistit">Value</A>&nbsp;value,
           <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</A>&lt;?&gt;&nbsp;clazz,
           <A HREF="../../../com/persistit/encoding/CoderContext.html" title="interface in com.persistit.encoding">CoderContext</A>&nbsp;context)
           throws <A HREF="../../../com/persistit/exception/ConversionException.html" title="class in com.persistit.exception">ConversionException</A></PRE>
<DL>
<DD><p>
 Creates an instance of the supplied class, populates its state by
 decoding the supplied <code>Value</code>, and returns it. This method
 will be called only if this <code>ValueCoder</code> has been registered
 with the current <A HREF="../../../com/persistit/encoding/CoderManager.html" title="interface in com.persistit.encoding"><CODE>CoderManager</CODE></A> to encode objects having supplied
 <code>Class</code> value. Persistit will never call this method to decode
 a value that was <code>null</code> when written because null values are
 handled by built-in encoding logic.
 </p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>value</CODE> - The <code>Value</code> from which interior fields of the
            object are to be retrieved<DD><CODE>clazz</CODE> - The class of the object to be returned.<DD><CODE>context</CODE> - An arbitrary object that can optionally be supplied by the
            application to convey an application-specific context for the
            operation. (See <A HREF="../../../com/persistit/encoding/CoderContext.html" title="interface in com.persistit.encoding"><CODE>CoderContext</CODE></A>.) The default value is
            <code>null</code>.
<DT><B>Returns:</B><DD>An <code>Object</code> having the same class as the suppled
         <code>clazz</code> parameter.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../com/persistit/exception/ConversionException.html" title="class in com.persistit.exception">ConversionException</A></CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/ValueCoder.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/persistit/encoding/SerialValueCoder.html" title="class in com.persistit.encoding"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/persistit/encoding/ValueDisplayer.html" title="interface in com.persistit.encoding"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/persistit/encoding/ValueCoder.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ValueCoder.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2005-2012 <a href="http://www.akiban.com">Akiban Technologies, Inc</a>. All Rights Reserved.
</BODY>
</HTML>
